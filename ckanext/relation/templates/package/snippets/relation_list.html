{% extends "package/read_base.html" %}



{% block primary_content_inner %}
{% set pkg = c.pkg_dict %}

    <h1>
      {% block page_heading %}
        {{ h.dataset_display_name(pkg) }}
        {% if pkg.state.startswith('draft') %}
          [{{ _('Draft') }}]
        {% endif %}
        {% if pkg.state == 'deleted' %}
          [{{ _('Deleted') }}]
        {% endif %}
      {% endblock %}
    </h1>


<div class="dataset-item"> 
<h2>{{ 'Verknüpfungen zu anderen Katalogeinträgen' }}</h2>



{% set dependency = h.rel_get_dependency_package(pkg.id) %}
{% if dependency %}
      <h3>{{ 'Dieser Katalogeintrag ist abhängig von folgendem Katalogeintrag:' }}</h3>
	  <div class="parent-list">
      {% for depcy in dependency %}
	  <div class="row">
	  {% if depcy.state != 'deleted' %}
      {% set org = depcy.organization %}
	  	  <div class="col-md-2">{% snippet 'package/snippets/marker.html', package=depcy %}</div>
          <div class="col-md-10 column">
          {{ h.dataset_link(depcy) }} <a href="{{  h.url_for(org.type + '_read', id=org.name, )}}">[{{ org.title }}] </a>
          </div>
      {% endif %}</div>
	  {% endfor %}
      </div>
      {% endif %} 



{% set parent = h.rel_get_parent_package(pkg.id) %}
{% if parent %}
      <h3>{{ 'Dieser Katalogeintrag ist ein Teil von folgendem Katalogeintrag:' }}</h3>
	  	  <div class="parent-list">
      {% for par in parent %}
	  <div class="row">
	  {% if par.state != 'deleted' %}
      {% set org = par.organization %}
	  	  <div class="col-md-2">{% snippet 'package/snippets/marker.html', package=par %}</div>
          <div class="col-md-10 column">
          {{ h.dataset_link(par) }} <a href="{{  h.url_for(org.type + '_read', id=org.name, )}}">[{{ org.title }}] </a>
          </div>
      {% endif %}</div>
	  {% endfor %}
      </div>
      {% endif %}
      
      
      
{% set linked = h.rel_get_linked_package(pkg.id) %}
{% if linked %}
      <h3>{{ 'Dieser Katalogeintrag weist auf folgenden Katalogeintrag hin:' }}</h3>
      <div class="parent-list">
      {% for lf in linked %}
	  <div class="row">
	  {% if lf.state != 'deleted' %}
	  	  <div class="col-md-2" >{% snippet 'package/snippets/marker.html', package=lf %}</div>
      {% set org = lf.organization %}
          <div class="col-md-10 column">
          {{ h.dataset_link(lf) }} <a href="{{  h.url_for(org.type + '_read', id=org.name, )}}">[{{ org.title }}] </a>
          </div>
      {% endif %}</div>
	  {% endfor %}
      </div>
      {% endif %}


{% if not linked and not dependency and not parent%}
<i>{{ 'Dieser Katalogeintrag hat keine Verknüpfungen.' }}</i>
{% endif %}  

</div>


<div class="dataset-item">
<h2>{{ 'Verknüpfungen von anderen Katalogeinträgen' }}</h2>

     
{% set depend = h.rel_get_depend_package(pkg.id) %}
{% if depend %}
      <h3>{{ 'Die folgenden Katalogeinträgen sind abhängig von diesem Katalogeintrag:' }}</h3>
	  	  <div class="parent-list">
      {% for dep in depend %}
	  <div class="row">
	  {% if dep.state != 'deleted' %}
      {% set org = dep.organization %}
	  	  <div class="col-md-2">{% snippet 'package/snippets/marker.html', package=dep %}</div>
          <div class="col-md-10 column">
          {{ h.dataset_link(dep) }} <a href="{{  h.url_for(org.type + '_read', id=org.name, )}}">[{{ org.title }}] </a>
          </div>
      {% endif %}</div>
	  {% endfor %}
      </div>
      {% endif %}


{% set child = h.rel_get_child_package(pkg.id) %}
{% if child %}
    <h3>{{ 'Die folgenden Katalogeinträgen sind ein Teil von diesem Katalogeintrag:' }}</h3>
	  <div class="parent-list">
	        {% for chl in child %}
				  <div class="row">
	          {% if chl.state != 'deleted' %}
      {% set org = chl.organization %}
	  	  <div class="col-md-2">{% snippet 'package/snippets/marker.html', package=chl %}</div>
          <div class="col-md-10 column">
          {{ h.dataset_link(chl) }} <a href="{{  h.url_for(org.type + '_read', id=org.name, )}}">[{{ org.title }}] </a>
          </div>
      {% endif %}</div>
	  {% endfor %}
      </div>
      {% endif %}  




{% set links = h.rel_get_links_package(pkg.id) %}
{% if links %}
      <h3>{{ 'Die folgenden Katalogeinträge weisen auf diesen Katalogeintrag hin:' }}</h3>
	  	  <div class="parent-list">
      {% for lt in links %}
	  <div class="row">
	  {% if lt.state != 'deleted' %}
      {% set org = lt.organization %}
	  	  <div class="col-md-2">{% snippet 'package/snippets/marker.html', package=lt %}</div>
          <div class="col-md-10 column">
          {{ h.dataset_link(lt) }} <a href="{{  h.url_for(org.type + '_read', id=org.name, )}}">[{{ org.title }}] </a>
          </div>
      {% endif %}
	  </div>
	  {% endfor %}
      </div>
       {% endif %}


{% if not links and not depend and not child %}
<i>{{ 'Keine anderen Katalogeinträge sind mit diesem Eintrag verknüpft.' }}</i>
{% endif %}  
      

</div>

{% endblock %}

